<p-panel styleClass="hospedes-panel">
  <ng-template pTemplate="header">
    <div class="panel-header">
      <div class="panel-header__titles">
        <h2>Hóspedes</h2>
        <p class="subtitle">Visualize e gerencie os cadastros importados do hotel.</p>
      </div>
      <p-button label="Importar planilha" icon="pi pi-upload" [routerLink]="['/hospedes/import']"></p-button>
    </div>
  </ng-template>

  <ng-container *ngIf="paginatedHospedes.length; else emptyState">
    <div class="cards-grid">
      <p-card *ngFor="let h of paginatedHospedes" styleClass="hospede-card">
        <ng-template pTemplate="title">
          <div class="card-title">
            <span class="card-title__name">{{ h.nome_completo || 'Hóspede sem nome' }}</span>
            <p-tag
              *ngIf="h.apto; else semApto"
              severity="info"
              value="Apto {{ h.apto }}"
            ></p-tag>
            <ng-template #semApto>
              <p-tag severity="warning" value="Apto não informado"></p-tag>
            </ng-template>
          </div>
        </ng-template>

        <ng-template pTemplate="subtitle">
          <div class="card-subtitle">Código #{{ h.codigo || '-' }}</div>
        </ng-template>

        <div class="info-grid">
          <div class="info-item">
            <span class="label">E-mail</span>
            <span class="value">{{ h.email || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Telefone</span>
            <span class="value">{{ h.telefone || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Profissão</span>
            <span class="value">{{ h.profissao || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Documento</span>
            <span class="value">{{ h.identidade || h.cpf || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Nascimento</span>
            <span class="value">{{ h.data_nascimento || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Sexo</span>
            <span class="value">{{ h.sexo || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Endereço</span>
            <span class="value">{{ h.endereco || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Cidade/UF</span>
            <span class="value">{{ h.cidade || '-' }} - {{ h.estado || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">País</span>
            <span class="value">{{ h.pais || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">CEP</span>
            <span class="value">{{ h.cep || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Entrada</span>
            <span class="value">{{ h.entrada || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Saída</span>
            <span class="value">{{ h.saida || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">ID Hóspede Oracle</span>
            <span class="value">{{ h.idhospede || '-' }}</span>
          </div>
          <div class="info-item">
            <span class="label">ID Reserva Oracle</span>
            <span class="value">{{ h.idreservasfront || '-' }}</span>
          </div>
        </div>

        <div class="card-footer">
          <p-button
            icon="pi pi-search"
            label="Compatibilidade"
            (click)="buscarCompatibilidade(h)"
            [loading]="buscandoCompatibilidade[h.id]"
            styleClass="compatibilidade-button"
          ></p-button>
          <p-button icon="pi pi-trash" severity="danger" (click)="remove(h.id)" rounded outlined></p-button>
        </div>
      </p-card>
    </div>
  </ng-container>
</p-panel>

<ng-template #emptyState>
  <div class="empty-state">
    <i class="pi pi-users"></i>
    <h3>Nenhum hóspede encontrado</h3>
    <p>Importe uma planilha para começar a visualizar os registros.</p>
  </div>
</ng-template>

<p-paginator
  [first]="page * rows"
  [rows]="rows"
  [rowsPerPageOptions]="[6, 9, 12, 24]"
  [totalRecords]="hospedes.length"
  (onPageChange)="onPageChange($event)"
></p-paginator>
